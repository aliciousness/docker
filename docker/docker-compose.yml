version: '3.0'
networks:
  guacnetwork:
    driver: bridge
  rustdesk-net:
    external: false
services:
  portainer:
    container_name: portainer
    image: portainer/portainer-ce:latest
    restart: unless-stopped
    privileged: true
      # security_opt:
      # - no-new-privileges:true
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./portainer/portainer-data:/data
    ports:
      - 9000:9000

        #  homeassistant:
        #container_name: homeassistant
        # image: 'ghcr.io/home-assistant/home-assistant:stable'
        # volumes:
        # - /home/mini/dell_mini/home_assisant/config:/config
        # - /etc/localtime:/etc/localtime:ro
        # restart: unless-stopped
        # privileged: true
        # network_mode: host

  heimdall:
    image: lscr.io/linuxserver/heimdall:latest
    container_name: heimdall
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
    volumes:
      - /home/mini/dell_mini/heimdall/config:/config
    ports:
      - 80:80
      - 443:443
    restart: unless-stopped

  guacamole:
    image: oznu/guacamole
    container_name: guacamole
    networks:
      guacnetwork:
    restart: unless-stopped
    ports:
      - '8080:8080'
    environment:
      EXTENSIONS: auth-totp
    volumes:
      - /home/mini/dell_mini/guacamole/guacamole_data:/config

  hbbs:
    container_name: rustdeck-hbbs
    ports:
      - 21115:21115
      - 21116:21116
      - 21116:21116/udp
      - 21118:21118
    image: rustdesk/rustdesk-server:latest
    command: hbbs -r example.com:21117
    volumes:
      - /home/mini/dell_mini/rustdeck/hbbs:/root
    networks:
      - rustdesk-net
    depends_on:
      - hbbr
    restart: unless-stopped

  hbbr:
    container_name: rustdeck-hbbr
    ports:
      - 21117:21117
      - 21119:21119
    image: rustdesk/rustdesk-server:latest
    command: hbbr
    volumes:
      - /home/mini/dell_mini/rustdeck/hbbr:/root
    networks:
      - rustdesk-net
    restart: unless-stopped

